name: Matrix update
on:
  schedule:
    # * is a special character in YAML so you have to quote this string
    - cron:  '0 0 * * *'
  workflow_dispatch:
jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          repository: 'Netyyyy/spring-cloud-azure-tools'
#           path: 'spring-cloud-azure-t'
          fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis
      - name: Set up JDK 11
        uses: actions/setup-java@v3
        with:
          java-version: '11'
          distribution: 'temurin'
          cache: maven 
      - name: Updating version matrix
        run: |
          mvn -N io.takari:maven:wrapper
          ./mvnw clean install -P update-matrix -DskipTests -ntp
      - run: |
          if [ ! -f "updated.json" ];then
            echo "BU存在json"
            else 
            echo "存在"
          fi
          


